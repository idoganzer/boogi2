---
title: Game class in multiplayer mode
editable: false
---

<div align="center" style="background-color: #e5ecff">    <br/>    <div>DOC</div>    <h1>Game class in multiplayer mode</h1>    <br/>  </div>

### Files Used:
ðŸ“„ src/game.js


<br/>



<br/>

<div style="background: #e5ecff; padding: 10px 10px 10px 10px; border-bottom: 1px solid #c1c7d0; border-radius: 4px;">    ðŸ“„ src/game.js  </div>

```js
â¬œ 14     import 'pixi';
â¬œ 15     import 'p2';
â¬œ 16     import Phaser from 'phaser';
ðŸŸ© 17     import MatchI from './multiplayer/match';
ðŸŸ© 18     import Gameplay from './multiplayer/gameplay';
â¬œ 19     
â¬œ 20     /* Game Class
â¬œ 21      *
```
<br/>

<div style="background: #e5ecff; padding: 10px 10px 10px 10px; border-bottom: 1px solid #c1c7d0; border-radius: 4px;">    ðŸ“„ src/game.js  </div>

```js
â¬œ 85     		this.client = null;
â¬œ 86     		this.connect = null;
â¬œ 87     		this.debugMode = false;
ðŸŸ© 88     		this.multiplayer = false;
â¬œ 89     		this.matchInitialized = false;
â¬œ 90     		this.realms = ['A', 'E', 'G', 'L', 'P', 'S', 'W'];
â¬œ 91     		this.availableMusic = [];
```
<br/>

<div style="background: #e5ecff; padding: 10px 10px 10px 10px; border-bottom: 1px solid #c1c7d0; border-radius: 4px;">    ðŸ“„ src/game.js  </div>

```js
â¬œ 241    	 * Load all required game files
â¬œ 242    	 */
â¬œ 243    
ðŸŸ© 244    	loadGame(setupOpt, matchInitialized, matchid) {
ðŸŸ© 245    		if (this.multiplayer && !matchid) {
ðŸŸ© 246    			this.matchInitialized = matchInitialized;
ðŸŸ© 247    		}
â¬œ 248    		if (matchid) {
â¬œ 249    			this.matchid = matchid;
â¬œ 250    		}
```
<br/>

<div style="background: #e5ecff; padding: 10px 10px 10px 10px; border-bottom: 1px solid #c1c7d0; border-radius: 4px;">    ðŸ“„ src/game.js  </div>

```js
â¬œ 554    
â¬œ 555    		this.matchInit();
â¬œ 556    	}
ðŸŸ© 557    	async matchInit() {
ðŸŸ© 558    		if (this.multiplayer) {
ðŸŸ© 559    			if (Object.keys(this.match).length === 0) {
ðŸŸ© 560    				await this.connect.serverConnect(this.session);
ðŸŸ© 561    				let match = new MatchI(this.connect, this, this.session);
ðŸŸ© 562    				let gameplay = new Gameplay(this, match);
ðŸŸ© 563    				match.gameplay = gameplay;
ðŸŸ© 564    				this.gameplay = gameplay;
ðŸŸ© 565    				this.match = match;
ðŸŸ© 566    
ðŸŸ© 567    				// Only host
ðŸŸ© 568    				if (this.matchInitialized) {
ðŸŸ© 569    					let n = await this.match.matchCreate();
ðŸŸ© 570    
ðŸŸ© 571    					console.log('created match', n);
ðŸŸ© 572    					await match.matchMaker(n, this.configData);
ðŸŸ© 573    				}
ðŸŸ© 574    			}
ðŸŸ© 575    			// Non-host
ðŸŸ© 576    			if (this.matchid) {
ðŸŸ© 577    				let n = await this.match.matchJoin(this.matchid);
ðŸŸ© 578    				console.log('joined match', n);
ðŸŸ© 579    			}
ðŸŸ© 580    		}
ðŸŸ© 581    	}
â¬œ 582    	async matchJoin() {
â¬œ 583    		await this.matchInit();
â¬œ 584    		await this.match.matchMaker();
```
<br/>

<div style="background: #e5ecff; padding: 10px 10px 10px 10px; border-bottom: 1px solid #c1c7d0; border-radius: 4px;">    ðŸ“„ src/game.js  </div>

```js
â¬œ 730    				// Updates UI to match new creature
â¬œ 731    				this.UI.updateActivebox();
â¬œ 732    				this.updateQueueDisplay();
ðŸŸ© 733    				if (this.multiplayer && this.playersReady) {
ðŸŸ© 734    					this.gameplay.updateTurn();
ðŸŸ© 735    				} else {
ðŸŸ© 736    					this.playersReady = true;
ðŸŸ© 737    				}
â¬œ 738    			}, 50);
â¬œ 739    		}, 300);
â¬œ 740    	}
```
<br/>

<div style="background: #e5ecff; padding: 10px 10px 10px 10px; border-bottom: 1px solid #c1c7d0; border-radius: 4px;">    ðŸ“„ src/game.js  </div>

```js
â¬œ 860    	 *
â¬œ 861    	 * Delay the action turn of the current creature
â¬œ 862    	 */
ðŸŸ© 863    	delayCreature(o) {
ðŸŸ© 864    		// Send skip turn to server
ðŸŸ© 865    		if (this.multiplayer) {
ðŸŸ© 866    			this.gameplay.delay();
ðŸŸ© 867    		}
â¬œ 868    
â¬œ 869    		if (this.turnThrottle) {
â¬œ 870    			return;
```
<br/>



<br/>

<br/><br/>

This file was generated by Swimm. [Click here to view it in the app](https://swimm.io/link?l=c3dpbW0lM0ElMkYlMkZyZXBvcyUyRm5xMjh5MjNzcTBpYnB4ZG4xSkpUJTJGZG9jcyUyRk80RHFWSFAxaW5zb2dNaGMxT3F0). Timestamp: 2021-04-22T07:38:25.368Z
